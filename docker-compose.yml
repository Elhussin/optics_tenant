version: '3.9'
services:
  # db:
  #   image: postgres:15
  #   container_name: osm_db
  #   restart: always
  #   environment:
  #     POSTGRES_DB: osm_db
  #     POSTGRES_USER: osm_user
  #     POSTGRES_PASSWORD: osm_pass
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - postgres_data:/var/lib/postgresql/data

  backend:
    build:
      context: ./osmBack   # مسار مشروع Django
      dockerfile: Dockerfile
    container_name: osm_backend
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      - ./osmBack:/app       # ربط الكود المحلي مع الحاوية
    env_file:
      - ./osmBack/.env.development       # ملف البيئة (DATABASE_URL, SECRET_KEY...)
    network_mode: "host"  # للوصول إلى PostgreSQL على localhost



volumes:
  postgres_data:


# docker-compose up -d
# docker compose up --build
